{% extends 'myte/base.html' %}

{% block title %}Add formula{% endblock %}

{% block background %} id="body-add_formula" {% endblock %}

{% block body %}
<div class="container-stages center-h" style="margin-top: 60px;">
    {% if stage == 1 %}
        <span class="step active"></span>
        <span class="step"></span>
    {% else %}
        <span class="step finish"></span>
        <span class="step active"></span>
    {% endif %}
</div>
<div class="container-add-view">
    <div class="render-box">
        <div class="render-box--header">
            <h3 id="formula-view">Formula renderizada</h3>
        </div>
        <div class="render-box--content">
            {% if formula["codigo_latex"] %}
            <p>$$ {{ formula["codigo_latex"] }} $$</p>
            {% else %}
            <p style="color: rgb(191, 191, 191); font-size: 20px; font-weight: 400;">No se ha renderizado</p>
            {% endif %}
        </div>
    </div>
    <div class="container-add_formula">
        <form method="POST" class="form" id="add-form" action="">
            <div style="margin-top: 20px; display:flex; flex-direction: column; align-items: center;">
                <img src="{{ url_for('static', filename='images/logo.png') }}" style="height:100px;width:100px;" title="Myte">
                <h2 style="color:#35241b;">Creaci√≥n de formula</h2>
            </div>
            {% if stage == 1 %}
            <div class="input-formula">
                <p>Escribe el codigo en LaTeX:</p>
                <textarea class="input-latex" id="ilatex" name="latex" cols="50" rows="10" placeholder="formula ..."
                    style="margin-bottom: 20px;">{% if formula["codigo_latex"] %}{{ formula["codigo_latex"] }}{% endif %}</textarea>
            </div>
            <div class="container-input" style="width: 30%;">
                <button class="btn-submit--green" id="render-btn" name="render"
                    style="width: 100%; margin-bottom: 20px;">Renderizar</button>
            </div>
            {% else %}
            <div class="container-input" style="flex-direction: column;">
                <p>Ingresa el nombre de la formula</p>
                <input type="text" id="title-formula" name="title" placeholder="Titulo de la formula" autocomplete="off"
                    class="input" />
            </div>
            {% endif %}
        </form>
        <div class="container-input--many" style="margin-top:30px; justify-content:space-between;">
            {% if stage == 1 %}
            <div class="container-input" style="width: 30%;margin-left: 60px;">
                <button class="btn-submit--orange" id="previous-btn" style="width: 100%; background-color: darkgray;" disabled>Anterior</button>
            </div>
            {% else %}
            <div class="container-input" style="width: 30%;margin-left: 60px;">
                <button class="btn-submit--orange" id="previous-btn" style="width: 100%;">Anterior</button>
            </div>
            {% endif %}
            <div class="container-input" style="width: 30%; margin-right: 60px;">
                {% if stage == 1 %}
                <button class="btn-submit--blue" id="next-btn" style="width: 100%;">Siguiente</button>
                {% else %}
                <button class="btn-submit" id="next-btn" name="completed" style="width: 100%;">Enviar</button>
                {% endif %}
            </div>
        </div>
        {% if stage == 2 %}
        <script>
            $("#previous-btn").click(function(){
                var $form = $("#add-form");
                $form.append('<input type="hidden" name="back" />');
                $form.submit();
            });
            $("#formula-view").text("Formula");
                $("#render-parent").css("display", "none");
            var $container = $(".container-add_formula");
            var $submitBtn = $("#next-btn");
            $submitBtn.text("Completar");
            $container.css("height", "500px");
        </script>
        {% endif %}
    </div>
</div>

{% endblock %}
