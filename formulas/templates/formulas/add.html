{% extends 'base.html' %}
{% load static %}
{% load filters %}
{% load widget_tweaks %}

{% block title %}Creación de formula{% endblock %}

{% block main %}class="add-formula"{% endblock %}

{% block body %}
<div class="c-stages">
    {% if stage == 1 %}
        <span class="stage active" value="1"></span>
        <span class="stage" value="2"></span>
    {% else %}
        <span class="stage finish" value="1"></span>
        <span class="stage active" value="2"></span>
    {% endif %}
</div>

<div class="c-add-view">
    <div class="render-box">
        <div class="header">
            <h3 id="formula-state-header">Formula renderizada</h3>
        </div>
        <div class="content">
            {% if formula %}
                <p>$$ {{ formula.latex }} $$</p>
            {% else %}
                <p class="empty">No se ha renderizado</p>
            {% endif %}
        </div>
    </div>
    <div class="c-add_formula">
        <form method="POST" class="form" id="add-form" action="">
            {% csrf_token %}
            <div class="myte-header">
                <img src="{% static 'images/logo.png' %}" title="Myte">
                <h2 style="margin-top: 20px; color:#35241b;">Creación de formula</h2>
            </div>
            {% if stage == 1 %}
            {{ form.non_field_errors }}
            <div class="input-formula">
                <p>Escribe el codigo en LaTeX:</p>
                {% render_field form.codigo_latex class="input-latex" cols="50" rows="10" placeholder="formula ..." style="margin-bottom: 20px" %}
            </div>
            <div class="c-input" style="width: 30%;">
                <button class="btn-submit--green" id="render-btn" name="render"
                    style="width: 100%; margin-bottom: 20px;">Renderizar</button>
            </div>
            {% else %}
            <div class="c-input" style="flex-direction: column;">
                <p>Ingresa el nombre de la formula</p>
                    {% render_field form.nombre class="input" placeholder="Titulo de la formula" autocomplete="off" %}
                
            </div>
            {% endif %}
        </form>
        <div class="c-input--many" style="margin-top:30px; justify-content:space-between;">
            <div class="c-input" style="width: 30%;margin-left: 60px;">
                <button class="btn-submit--orange" id="previous-btn" style="width: 100%;">Anterior</button>
            </div>
            <div class="c-input" style="width: 30%; margin-right: 60px;">
                <button class="btn-submit--blue" id="next-btn" style="width: 100%;"></button>
            </div>
        </div>
    </div>
    <div class="float-return">
        <a class="btn-submit--purple" href="{% url 'main:home' %}" style="width: 70%;">Home</a>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script type=text/javascript src="{% static 'formulas_js/formulas.js' %}"></script>
{% endblock %}